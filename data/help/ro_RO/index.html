<h1>Cuprins</h1>
<ul>
<li><a href="#detalii-generale">Detalii Generale</a></li>
<li><a href="#componenta-vizualizare">Componenta de Vizualizare</a></li>
<li><a href="#componenta-editare">Componenta de Editare</a></li>
<li><a href="#configurare-si-gestiune">Configurare &amp; Gestiune</a></li>
</ul>
<h1 id="detalii-generale">Detalii Generale</h1>
<h2 id="dg-despre">Despre</h2>
<h3 id="dg-scopul-proiectului">Scopul Proiectului</h3>
<p>Proiectul a început dintr-un motiv cât se poate de egoist: îmi doream să păstrez un jurnal structurat despre excursiile pe care le fac.<br />
Pe parcurs, însă, am realizat că s-ar mai putea să ajute pe cineva, așa că am decis să îl public în regim open-source, cu o licență cât se poate de liberală.<br />
În mare, modulul gestionează următoarele rubrici:</p>
<ul>
<li>sumarul tehnic - prezintă niște detalii prozaice precum: lungime, diferența totală de nivel, tip de teren etc.;</li>
<li>track-ul GPS al traseului, afișat simplu pe o hartă, cu două puncte marcate: punctul de pornire (cu verde) și punctul de sosire (cu roșu).</li>
</ul>
<h3>Tipuri de traseu</h3>
<p>În sumarul tehnic am inclus următoarele tipuri de informații:</p>
<ul>
<li>date specifice traseelor de bicicletă;</li>
<li>date specifice drumețiilor per-pedes (trekking/hiking);</li>
<li>date specifice turelor cu trenul.</li>
</ul>
<p>Cu alte cuvinte, vă puteți documenta (doar) aceste trei tipuri de plimbări.</p>
<h3 id="dg-componente-principale">Componente Principale</h3>
<p>În funcție de diversele funcții îndeplinite de zonele din modul, putem discuta de următoarele componente:</p>
<ul>
<li>Componenta de vizualizare: este caseta afișată imediat sub articol și care prezintă toate informațiile de care am amintit mai sus (<a href="#componenta-vizualizare">Detalii aici</a>);</li>
<li>Componenta de editare: este atașată formularului de creare/editare a articolelor și permite modificarea/ștergerea datelor despre traseul parcurs (<a href="#componenta-editare">Detalii aici</a>);</li>
<li>Componenta de configurare: se ocupă cu gestiunea opțiunilor generale, dar și cu gestiunea nomenclatoarelor (liste de valori predefinte ce pot fi selectate atunci când se completează datele despre traseul parcurs) (<a href="#optiuni-de-configurare-si-gestiune">Detalii aici</a>).</li>
</ul>
<h2 id="dg-capturi-ecran">Capturi de Ecran</h2>
<h4>Pagina de configurare</h4>
<p><img src="$helpDataDirUrl$/screenshots/admin-settings.png" alt="Pagina de configurare" title="Pagina de configurare" /></p>
<h4>Editare articol - Sumar tehnic - Selectare tip traseu</h4>
<p><img src="$helpDataDirUrl$/screenshots/admin-edit-summary-empty.png" alt="Editare articol - Sumar tehnic - Selectare tip traseu" title="Editare articol - Sumar tehnic - Selectare tip traseu" /></p>
<h4>Editare articol - Sumar tehnic - Informații traseu bicicletă</h4>
<p><img src="$helpDataDirUrl$/screenshots/admin-edit-summary-bike.png" alt="Editare articol - Sumar tehnic - Informații traseu bicicletă" title="Editare articol - Sumar tehnic - Informații traseu bicicletă" /></p>
<h4>Editare articol - Sumar tehnic - Harta</h4>
<p><img src="$helpDataDirUrl$/screenshots/admin-edit-map.png" alt="Editare articol - Sumar tehnic - Harta" title="Editare articol - Sumar tehnic - Harta" /></p>
<h4>Articol - Teaser-ul din partea de sus</h4>
<p><img src="$helpDataDirUrl$/screenshots/viewer-teaser-top.png" alt="Articol - Teaser-ul din partea de sus" title="Articol - Teaser-ul din partea de sus" /></p>
<h4>Articol - Sumar tehnic</h4>
<p><img src="$helpDataDirUrl$/screenshots/viewer-summary.png" alt="Articol - Sumar tehnic" title="Articol - Sumar tehnic" /></p>
<h4>Articol - Harta</h4>
<p><img src="$helpDataDirUrl$/screenshots/viewer-map.png" alt="Articol - Harta" title="Articol - Harta" /></p>
<h2 id="dg-cerinte-tehnice">Cerințe Tehnice</h2>
<p>Pentru a rula acest modul, aveți nevoie de următoarele:</p>
<ul>
<li>un WordPress (evident!) - minim versiunea 4.0 (poate și mai jos - nu știu, nu am încercat și prefer să nu îmi bat capul);</li>
<li>o bază de date MySQL cu suport pentru date GIS;</li>
<li>extensia libxml trebuie să fie instalată;</li>
<li>extensia mysqli trebuie să fie instalată.</li>
</ul>
<p>În principiu toate aceste cerințe sunt verificate la instalare, iar procesul se oprește dacă nu sunt îndeplinite.</p>
<h2 id="dg-licenta">Licența</h2>
<p>Acest modul este distribuit sub licența MIT (<a href="https://opensource.org/licenses/MIT">detalii aici</a>). Ce înseamnă asta:</p>
<ul>
<li>că îl puteți folosi absolut gratuit și fără vreun alt fel de obligație materială sau financiară;</li>
<li>că îl puteți redistribui gratuit și fără vreun alt fel de obligație materială sau financiară;</li>
<li>că trebuie să includeți o copie a termenilor de licențiere acolo unde îl instalați sau de fiecare dată când îl redistribuiți;</li>
<li>că nu este oferită nici un fel de garanție de bună funcționare, de nici un fel, nici implicită, nici explicită.</li>
</ul>
<h2 id="dg-mentiuni-multumiri">Mențiuni &amp; Mulțumiri</h2>
<p>Modulul WP-Trip-Summary folosește următoarele librării:</p>
<ol>
<li><a href="https://github.com/joshcam/PHP-MySQLi-Database-Class">PHP-MySQLi-Database-Class</a> - o librărie construită peste mysqli. Este folosită în locul wpdb, componenta standard din WordPress.</li>
<li><a href="http://social-library.org/">MimeReader</a> - unde detector de MIME-Type scris de Shane Thompson.</li>
<li><a href="https://github.com/JangoSteve/jQuery-EasyTabs">jQuery EasyTabs</a> - plug-in jQuery pentru organizarea conținutului pe file/tab-uri</li>
<li><a href="https://github.com/HemantNegi/jquery.sumoselect">jQuery.SumoSelect</a> - plug-in de jQuery folosit pentru selecția multiplă pe elementele</li>
<li><a href="https://github.com/Leaflet/Leaflet">Leaflet</a> - componenta de hartă</li>
<li><a href="https://github.com/lodash/lodash">Lodash</a> - librărie de funcții utile pentru JavaScript</li>
<li><a href="https://github.com/ifandelse/machina.js/tree/master">Machina</a> - o mașină de stare implementată în JavaScript</li>
<li><a href="https://github.com/rstacruz/nprogress">NProgress</a> - o librărie pentru prezentarea vizuală a progresului diverselor operațiuni</li>
<li><a href="https://github.com/CodeSeven/toastr">Toastr</a> - o librărie JavaScript pentru prezentarea vizuală a notificărilor</li>
<li><a href="https://github.com/medialize/URI.js">URI.js</a> - o librărie JavaScript pentru construirea și interpretarea URI-urilor</li>
<li><a href="https://github.com/teamdf/jquery-visible">Visible</a> - plug-in the jQuery care determină dacă un element se află sau nu în zona vizuală a ferestrei browser-ului</li>
<li><a href="https://github.com/malsup/blockui/">blockUI</a> - plug-in de jQuery care permite afișarea ferestrelor modale</li>
<li><a href="http://code.google.com/p/kite/">kite</a> - engine de template-uri scris in JavaScript, mic și simplu</li>
<li><a href="https://github.com/bbecquet/Leaflet.MagnifyingGlass">Leaflet.MagnifyingGlass</a> - plug-in de Leaflet care adaugă hărții funcționalitatea de lupă: mărirea unei zone individuale de pe hartă</li>
<li><a href="https://github.com/Leaflet/Leaflet.fullscreen">Leaflet.fullscreen</a> - plug-in de Leaflet care permite afișarea hărții pe întreg ecranul</li>
</ol>
<h1 id="componenta-vizualizare">Componenta de Vizualizare</h1>
<h1 id="componenta-editare">Componenta de Editare</h1>
<h1 id="configurare-si-gestiune">Configurare &amp; Gestiune</h1>
<p>Elementele de configurare &amp; gestiune sunt puse la punct pentru a oferi o oarecare flexibilitate în utilizarea progrămelului. Astfel, putem vorbi despre două mari și late direcții de flexibilizare:</p>
<ul>
<li>opțiuni generice (unități de măsură, activarea / dezactivarea unor unelte sau elemente de interfață etc.);</li>
<li>gestiunea nomenclatoarelor (adică a seturilor de opțiuni predefinite din care se completează unele câmpuri, cum ar fi Nivelul de Dificultate).</li>
</ul>
<h2>Opțiunile Generice</h2>
<p>Există o pagină dedicată din care opțiunile generice pot fi modificate. Acolo se ajunge din meniul principal, accesând: Trip Summary -&gt; Configurare.</p>
<p>Odată ajunși aici, există următoarele punct de configurare.</p>
<h4>Sistemul de unități de măsură.</h4>
<p>Se poate ori sistemul metric (m/km), ori sistemul imperial (mile/inch). Foarte important de menționat e că nu se face nici un fel de calcul de conversie și că se presupune că atunci când se introduce sumarul unei ture valorile sunt deja exprimate în sistemul ales aici.</p>
<h4>Dacă se afișează sau nu teaser-ul.</h4>
<p>Odată debifat câmpul și salvate modificările, teaser-ul din pagina articolului va fi ascuns.</p>
<h4>Textul teaser-ului din partea de sus</h4>
<p>Textul componentei teaser-ului care e afișată deasupra articolului. Există deja o valoare predefinită.</p>
<h4>Textul teaser-ului din partea de jos</h4>
<p>Textul componentei teaser-ului care afișată imediat sub caseta de sumar. Există deja o valoare predefinită.</p>
<h4>Șablonul URL-ului sursei de tile-uri de hartă</h4>
<p>Aici discuția e un pic mai lungă. </p>
<p>În primul rând, de reținut că harta utilizată nu e o singură imagine, ci e formată din mai multe imagini pătrate, denumite tile-uri care, așezate una lângă alta, formează întreaga hartă.</p>
<p>Există mai multe seturi de tile-uri, câte unul pentru fiecare nivel de zoom, iar fiecare tile e caracterizat prin două coordonate - să zicem x și y - cam ca pe o tablă de șah.</p>
<p>Așadar, ca să putem accesa un tile, avem nevoie de următoarele informații: </p>
<ul>
<li>z - nivelul de zoom;</li>
<li>x - poziția pe orizontală;</li>
<li>y - poziția pe verticală.</li>
</ul>
<p>Dar mai e o problemă: ca să încarci atâtea imagini într-un timp cât mai rapid uneori aceste tot acest mega-set de tile-uri este copiat redundant pe mai multe mașini - servere.<br />
Aceste mașini sunt și ele numerotate/denumite - să zicem, spre exemplu, 1, 2, 3, 4 etc.<br />
Ideea aici este că pot - în loc de a le cere din același loc - pot să cer o parte de la mașina 1, o parte de la mașina 2 etc, dar asta, repet, nu e musai un comportament obligatoriu.</p>
<p>Ca să adun toate aceste lucruri, pentru a putea încărca tile-uri de hartă dintr-o altă sursă decât cea predefinită - OpenStreetMaps - aveți la dispoziție câmpul aflat acum în discuție.<br />
Iar acest șablon oferă următoarele marcaje speciale:</p>
<ul>
<li>{s} - pentru a specifica unde se introduce numărul mașinii (ex. {s}.tile.osm.org s-ar traduce în 1.tile.osm.org, 2.tile.osm.org);</li>
<li>{z} - pentru a specifica unde se introduce numărul nivelului de zoom;</li>
<li>{x} - pentru a specifica unde se introduce poziția pe orizontală a tile-ului;</li>
<li>{y} - pentru a specifica unde se introduce poziția pe verticală a tile-ului.</li>
</ul>
<p>Marcajele pot fi combinate oricum și va trebui să consultați documentația pentru furnizorul de la care vreți să afișați harta.</p>
<h4>URL-ul paginii de copyright a sursei de tile-uri de hartă</h4>
<p>În funcție de unde alegeți să folosiți harta, zona de copyright poate fi sau nu obligatorie. Este, în orice caz, o chestie de bun simț, așa că vă încurajez să o aveți la vedere.<br />
Plasarea este în colțul din dreapta jos al hărții, iar câmpul aflat acum în discuție permite introducerea unui link către furnizor.</p>
<h4>Nota de copyright a sursei de tile-uri de hartă</h4>
<p>În funcție de unde alegeți să folosiți harta, zona de copyright poate fi sau nu obligatorie. Este, în orice caz, o chestie de bun simț, așa că vă încurajez să o aveți la vedere.<br />
Plasarea este în colțul din dreapta jos al hărții, iar câmpul aflat acum în discuție permite introducerea notei propriu-zise de copyright.</p>
<h4>Se permite comutărea hărții pe întreg ecranul?</h4>
<p>Dacă debifați acest câmp, în caseta tehnică din pagina articolului nu va mai fi afișat butonul care comută harta pe întreg ecranul (full-screen).<br />
Implicit, câmpul este bifat, deci butonul este afișat.</p>
<h4>Se activează lupa?</h4>
<p>Dacă debifați acest câmp, în caseta tehnică din pagina articolului nu va mai fi afișat butonul care activează lupa.<br />
Implicit, câmpul este bifat, deci butonul este afișat.</p>
<h4>Se afișează scara hărții</h4>
<p>Dacă debifați acest câmp, în caseta tehnică din pagina articolului nu va mai fi afișată scara hărții (în stânga-jos).<br />
Implicit, câmpul este bifat, deci scara hărții este afișată.</p>
<h4>Se permite descărcarea track-ului?</h4>
<p>Dacă debifați acest câmp, în caseta tehnică din pagina articolului nu va mai fi afișat butonul care permite descărcarea track-ului GPX.<br />
Implicit, câmpul este bifat, deci butonul este afișat.</p>
<h2>Gestiunea Nomenclatoarelor</h2>